## 7. Асинхронщина

### 7.1. [Классическая задача про асинхронность](./typical-async-task.md).

<details>
<summary>Ответ</summary>

1. Сначала проверяем, что у нас в синхронном потоке: это `console.log(0);` и `console.log(16)` - они выведутся первыми;

```bash
"0"
"16"
```

2. Смотрим на асинхронные операции: два таймаута и два промис-резолва;

3. Таймауты отправляются отсчитывать время, когда отсчитают, занесутся в очередь;

4. В очередь попадают промисы (помни, что **у промисов приоритет больший, чем у обычных коллбэков**);

5. Начинают вызываться `.then`ы промисов по уровням вложенности - первый уровень `then`ов (`console.log(3);`, `console.log(9);`), второй и т.д.;

```bash
"3"
"9"
```

6. В первом `.then` первого промиса бросается ошибка. Из-за это следующие `.then` этого промиса не будут вызваны - будет вызван `.catch` первого промиса;

7. Но `.catch` первого промиса находится на шестом уровне вложенности. Поэтому прежде чем вызовется `.catch` первого промиса, должны вызваться первые пять уровней второго;

```bash
"10"
"11"
"12"
"13"
```

8. Потом вызывается шестой уровень вложенности;

```bash
"8"
"14"
```

9. Ждём пока таймауты отсчитаются;

10. Первым отсчитается таймер на 0 секунд, потом таймер на 1 секунду;

```bash
"2"
"1"
```

</details>
